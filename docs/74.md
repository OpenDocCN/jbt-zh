# Java类加载器

> 原文： [https://javabeginnerstutorial.com/core-java-tutorial/java-class-loader/](https://javabeginnerstutorial.com/core-java-tutorial/java-class-loader/)

## 简介：什么是Classloader

应用程序中的所有类文件在启动时都不会加载到内存中，而是根据程序的需要按需加载，此类的加载是由ClassLoader完成的。 ClassLoader是JVM的一部分，可将类加载到内存中。

Java ClassLoader是用Java本身编写的（*与以C ++* 编写的JVM相反）。 这意味着在需要时可以轻松开发自定义Class Loader，而无需了解JVM的细节。 ClassLoader是一个抽象类，它是java.lang包的一部分。

* * *

## Classloader的工作方式

一个应用程序可能需要不同的类才能在运行时正常运行，每当一个应用程序在运行时需要一个类时，ClassLoader都会查找给定的类名，如果找到则将其加载到内存中。 提供要加载的类的名称后，ClassLoader将尝试在不同位置查找构成类定义的数据。

ClassLoader搜索的位置将按照给定的顺序。

1.  首先在JRE的lib / ext目录以及系统范围，特定于平台的扩展目录中的JAR文件中查找类。
2.  其次在classpath（java.class.path属性）中查找该类。 类路径的默认值是当前目录，但是可以用不同的方式更改此值。

* * *

## ClassLoader层次结构

`ClassLoader` 使用委托模型来搜索要加载的类和资源。 每个ClassLoader实例将`具有`关联的父类加载器。 当类加载器获得查找类的请求时，给定的 `ClassLoader` 会在尝试查找类或资源本身之前将对类或资源的搜索委托给其父类加载器。 Bootstrap类加载器位于类加载器层次结构的顶部。 Bootstrap ClassLoader是虚拟机中的内置类加载器。 Bootstrap类加载器没有任何父项。

* * *

## 类加载器的类型

Java ClassLoader可以分为4种类型。

### Bootstrap类加载器

它是超级类加载器。 它没有任何父类ClassLoader。 它将Java的核心类（如java.lang，java.util包中的类）加载。

### 扩展类加载器

扩展ClassLoader将在JRE的lib / ext目录以及系统范围，特定于平台的扩展目录中的JAR文件中加载类。 Bootstrap ClassLoader将是Extension ClassLoader的父级。 开发人员可以在ext文件夹中手动添加jar，以使其由Extension ClassLoader加载。

### 系统类加载器

系统ClassLoader将在classpath（ *java.class.path属性*）中加载类。 扩展ClassLoader作为System ClassLoader的父级。 类路径的默认值是当前目录，但是可以用不同的方式更改此值。

1.  设置CLASSPATH环境变量。
2.  通过-classpath或-cp命令行选项提供的值。

### 定制类加载器

开发人员还可以根据需要创建Custom类。

* * *

## 使用自定义ClassLoader的优势

1.  应用服务器中的热部署
2.  自定义类加载器，以供浏览器在执行不受信任的代码之前检查安全性证书。