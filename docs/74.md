# Java 类加载器

> 原文： [https://javabeginnerstutorial.com/core-java-tutorial/java-class-loader/](https://javabeginnerstutorial.com/core-java-tutorial/java-class-loader/)

## 简介：什么是 Classloader

应用程序中的所有类文件在启动时都不会加载到内存中，而是根据程序的需要按需加载，此类的加载是由 ClassLoader 完成的。 ClassLoader 是 JVM 的一部分，可将类加载到内存中。

Java ClassLoader 是用 Java 本身编写的（*与以 C++ * 编写的 JVM 相反）。 这意味着在需要时可以轻松开发自定义 Class Loader，而无需了解 JVM 的细节。 ClassLoader 是一个抽象类，它是 java.lang 包的一部分。

* * *

## Classloader 的工作方式

一个应用程序可能需要不同的类才能在运行时正常运行，每当一个应用程序在运行时需要一个类时，ClassLoader 都会查找给定的类名，如果找到则将其加载到内存中。 提供要加载的类的名称后，ClassLoader 将尝试在不同位置查找构成类定义的数据。

ClassLoader 搜索的位置将按照给定的顺序。

1.  首先在 JRE 的 lib / ext 目录以及系统范围，特定于平台的扩展目录中的 JAR 文件中查找类。
2.  其次在 classpath（java.class.path 属性）中查找该类。 类路径的默认值是当前目录，但是可以用不同的方式更改此值。

* * *

## ClassLoader 层次结构

`ClassLoader` 使用委托模型来搜索要加载的类和资源。 每个 ClassLoader 实例将`具有`关联的父类加载器。 当类加载器获得查找类的请求时，给定的 `ClassLoader` 会在尝试查找类或资源本身之前将对类或资源的搜索委托给其父类加载器。 Bootstrap 类加载器位于类加载器层次结构的顶部。 Bootstrap ClassLoader 是虚拟机中的内置类加载器。 Bootstrap 类加载器没有任何父项。

* * *

## 类加载器的类型

Java ClassLoader 可以分为 4 种类型。

### Bootstrap 类加载器

它是超级类加载器。 它没有任何父类 ClassLoader。 它将 Java 的核心类（如 java.lang，java.util 包中的类）加载。

### 扩展类加载器

扩展 ClassLoader 将在 JRE 的 lib / ext 目录以及系统范围，特定于平台的扩展目录中的 JAR 文件中加载类。 Bootstrap ClassLoader 将是 Extension ClassLoader 的父级。 开发人员可以在 ext 文件夹中手动添加 jar，以使其由 Extension ClassLoader 加载。

### 系统类加载器

系统 ClassLoader 将在 classpath（ *java.class.path 属性*）中加载类。 扩展 ClassLoader 作为 System ClassLoader 的父级。 类路径的默认值是当前目录，但是可以用不同的方式更改此值。

1.  设置 CLASSPATH 环境变量。
2.  通过-classpath 或-cp 命令行选项提供的值。

### 定制类加载器

开发人员还可以根据需要创建 Custom 类。

* * *

## 使用自定义 ClassLoader 的优势

1.  应用服务器中的热部署
2.  自定义类加载器，以供浏览器在执行不受信任的代码之前检查安全性证书。